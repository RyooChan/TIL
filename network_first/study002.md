# study002
###### tags: `Tag(IT엔지니어를 위한 네트워크 입문)`

인터넷이 대중화된 이후 대부분의 기술이 `이더넷 - TCP/IP`기반이어서 기술이 점점 단순화되고 있지만 아직도 용도와 필요한 네트워크 속도에 따라 기술 요소들이 사용되고 있다.

이번에는 네트워크 연결 방법을 구분하고 네트워크 연결에 필요한 회선과 구성 요소를 알아본다.

## 네트워크 연결 구분

네트워크는 규모와 관리 범위에 따라 LAN, MAN, WAN 3가지로 구분된다.

* LAN(Local Area Network)
    * 사용자 내부 네트워크
* MAN(Metro Area Network)
    * 한 도시 정도를 연결하고 관리하는 네트워크
* WAN(Wide Area Network)
    * 멀리 떨어진 LAN을 연결해주는 네트워크

예전에는 이 3개가 사용하는 기술이 달랐지만, 지금은 이더넷으로 통합되면서 사용자가 전송 기술을 구분하는것은 무의미해졌다.
지금은 관리 범위 기준으로 셋을 구분한다.

![](https://i.imgur.com/pFGR9wN.png)

### LAN

LAN은 Local Area Network의 약자이고, 소규모 네트워크를 말한다.
먼 거리를 통신할 필요가 없어 스위치와 같이 비교적 간단한 장비로 연결된 네트워크이다.
관리 범위에서의 LAN은 자신이 소유한 건물이나 대지에 직접 구축한 선로로 동작시키는 네트워크로 정의할 수 있다.

![](https://i.imgur.com/vFlNGt5.png)

> 이렇게 복잡하거나 대규모인 네트워크라도 직접 구축한 네트워크 범위라면 LAN으로 부른다.

### WAN

WAN은 Wide Area Network의 약자로 먼 거리에 있는 네트워크를 연결하기 위해 사용된다.
멀리 떨어진 LAN을 서로 연결하거나 인터넷에 접속하기 위한 네트워크가 WAN에 해당한다.
보통 WAN은 직접 구축할 수 없는 네트워크이므로 대부분 통신사업자에게 회선을 임대해 사용한다.

![](https://i.imgur.com/r3169fM.png)

## 네트워크 회선

원격지 네트워크에 연결하기 위해서는 WAN을 사용해야 한다.
현재 WAN은 이더넷을 사용해서 통신사업자와 사용자를 연결해준다.

### 인터넷 회선

> 인터넷 접속을 위해 통신사업자와 연결하는 회선

일반 인터넷 회선의 종류는 다음과 같다.

* 광랜(이더넷)
    * 기가 ~ 100Mps
* FTTH
    * 기가 ~ 100Mbps
* 동축 케이블 인터넷
    * 수백 ~ 수십 Mbps
* xDSL(ADSL, VDSL 등)
    * 수십 ~ 수 Mbps

위의 인터넷 접속 기술은 기존 전화선을 사용하거나 특정 구간부터 다른 사용자와 공유된다.
이 공유 구간은 최대속도를 보장하지 않도록 구축하는 것이 일반적인데, 모든 사람이 항상 최대 속도로 인터넷에 접속하지는 않기 때문이다.

### 전용 회선

> 가입자와 통신사업자 간에 대역폭을 보장해주는 서비스

대역폭을 보장해주는 기술에는 여러 가지가 있지만 가입자와 통신사업자 간에는 전용 케이블로 연결되어 있고 통신사업자 내부에서 TDM(시분할 다중화 : Time Division Multiplexing)같은 기술로 마치 직접 연결한 것처럼 통신 품질을 보장해준다.
인터넷 전용 회선이 아닌 일반 전용 회선은 본자-지사 연결에 주로 사용된다

![](https://i.imgur.com/rCUQx9t.png)

전용 회선을 가입자와 접속하는 기술을 기반으로 구분한다면 `음성 전송 기술 기반의 저속 회선`과 `메트로 이더넷이라는 고속 회선`으로 분류 가능하다.

* 저속 : 음성 전송 기술 기반
    * 저속 음성 기술은 64Kbps단위로 구분되어 사용된다.
    * 해당 방식은 기본 단위를 묶어 회선 접속 속도를 높이는 방법으로 발전되어 온 기술이다.
    * 이전에는 높은 속도가 필요하지 않을 때나 높은 신뢰성이 필요할 때 사용되어 왔지만, 현재 이더넷 기반의 광기술이 신뢰할 정도의 수준으로 발전하여 점점 사용 빈도가 줄고 있다.
    * 결재 승인과 같은 전문(Clear Text)전송을 위한 VAN(Value Added Network)사나 대외 연결에는 저속 회선을 사용하는 경우가 많다.
    * 해당 기술 사용에는 원격지 전송 기술로 변환할 수 있는 라우터가 필요하다.
* 고속 : 메트로 이더넷
    * 광케이블 기반의 이더넷을 사용한다.
    * 가입자와 통신사업자 간의 접속 기술은 이더넷을 사용하고 통신사업자 내부에서는 이런 개발 가입자를 묶어 통신할 수 있는 다른 고속 통신 기술을 사용한다.
    * 가입자와 통신사업자 내부에서의 통신 기법이 다른 것은 통신사업자는 여러 가입자를 구분하고 가입자 트래픽을 고속으로 전송하는 것이 중요하기 때문이다.

### 인터넷 전용 회선

> 인터넷 연결 회선에 대한 통신 대역폭을 보장해주는 상품

가입자가 통신사업자와 연결되고, 이 연결이 다시 인터넷과 연결되는 구조이다.

![](https://i.imgur.com/YIIc9qX.png)

이건 통신사업자와 가입자 간의 연결 품질을 보장해준다.

기존에는 인터넷 전용 회선과 일반가정 네트워크 기술에 확연한 차이가 있었지만, 최근은 대부분 광 접속 기술을 활용한다.
인터넷 전용 회선 기술은 이더넷이 많이 쓰인다.

### VPN

> Virtual Private Network의 약자

물리적으로는 전용선이 아니지만, 가상으로 직접 연결한 것 같은 효과가 나도록 만들어주는 네트워크 기술이다.
다양한 VPN기술이 있고 가입자 입장에서의 기술과 통신사업자 입장에서의 기술이 별도로 발전해왔다.

#### 통신사업자 VPN

전용선은 연결 거리가 늘어날수록 비용이 증가한다.
이 전용선은 사용 가능한 대역폭을 보장해주지만 가입자가 계약된 대역폭을 항상 100% 사용하는 것이 아니어서 낭비되는 비용이 클 수 있다.
VPN을 활용하면 이 비용을 줄일 수 있다. 가장 대표적인 기술이 MPLS VPN이다.

![](https://i.imgur.com/yEGI0sH.png)

해당 기술을 사용하면 여러 가입자가 하나의 망에 접속해 통신하므로 공용 회선을 함께 이용하게 되어 비용이 낮아진다.
전용 회선 비용은 `거리와 속도`의 영향을 받지만, MPLS VPN은 거리보다 속도의 영향을 받으므로 거리가 멀어질수록 이 기술을 사용하는 것이 비용 절감에 도움이 된다.

#### 가입자 VPN

일반 사용자가 VPN을 사용한다면 대부분 가입자 VPN기술이다.
일반 인터넷망을 이용해 사용자가 직접 가상 전용 네트워크를 구성할 수 있다.
지방이나 해외를 전용선으로 연결하면 비용이 매우 비싸고 이전의 MPLS VPN 또한 일반 연결 비용보다 비싸다.
그래서 이게 쌈.

### DWDM

> Dense Wavelength Division Multiplex : 파장 분할 다중화

먼 거리를 통신할 때 케이블 포설 비용이 많이 들고 관리가 어려운 문제를 극복하기 위해 개발된 기술이다.
WDM과 DWDM기술은 하나의 광케이블에 다른 파장의 빛을 통해 여러 채널을 만드는 동시에 많은 데이터를 전송할 수 있다.

![](https://i.imgur.com/ts0CalZ.png)

## 네트워크 구성 요소

### 네트워크 인터피에스 카드(NIC)

> 네트워크 인터페이스카드는 컴퓨터를 네트워크에 연결하기 위한 하드웨어 장치이다.

* Network Interface Card
* Network Card
* Network Interface Controller

라고 부른다.

보통은 다들 NIC가 장착되지만, 여러 네트워크에 동시에 연결되어야 하거나 더 높은 대역폭이 필요한 경우 추가로 장착해준다.
근데 서버에 보통 10GT NIC가 장착되는 추세라 별도의 NIC를 장착하는 경우는 줄어들 것이라 예상된다.

NIC의 주요 역할은 다음과 같다.

* 직렬화(Serialization)
    * 전기 신호를 데이터 신호 형태로 / 데이터 신호 형태를 전기적 신호 형태로 변환한다.
* MAC주소
    * NIC는 MAC주소를 갖고 있다.
    * 받은 패킷의 도착지 주소가 자신의 MAC주소가 아니면 폐기하고 자신의 MAC주소가 맞으면 시스템 내부에서 처리할 수 있도록 전달한다.
* 흐름 제어(Flow Control)
    * 패킷 기반 네트워크에서는 다양한 통신이 하나의 채널을 이용하므로 이미 통신 중인 데이터 처리 때문에 새로운 데이터를 받지 못할 수 있다.
    * 이런 현상으로 인한 데이터 유실 방지를 위해 데이터를 받지 못할 때는 상대방에게 통신 중지를 요청할 수 있다.
    * 이런 작업을 흐름 제어라고 한다.

### 케이블과 커넥터

유선 연결을 진행할 때에 고려할 네트워크 연결점은 케이블이다.

케이블은 `트이스티드 페어 케이블`, `동축 케이블`, `광케이블` 3가지가 있다.

#### 이더넷 네트워크 표준

현재 가장 많이 사용되는 네트워크 기술은 이더넷 방식이다.
이 이더넷 네트워크를 사요하기 위한 케이블과 커넥터를 중심으로 알아본다.

대중화된 이더넷 표준은 `기가비트 이더넷`과 `10기가비트 이더넷`이다.

* 기가비트 이더넷
    * 일반 PC
* 10기가비트 이더넷
    * 데이터 센터의 서버

서버와 스위치 간 연결을 10기가비트 이더넷으로 구성할 경우, 스위치에서는 상위 스위치와의 연결을 위한 업링크 대역폭을 확보하기 위해 40기가비트나 100기가비트 이더넷을 사용한다.

이더넷에서도 케이블의 종류, 인코더의 종류 등으로 세분화해 여러 표준으로 나뉘지만 대중적으로 많이 사용하는 표준은 3가지이다.

* 1000BASE-T/10GBASE-T
    * 트위스티드 페어 케이블을 이용하는 기가 이더넷 표준
* 1000BASE-SX/10GBASE-SR
    * 멀티모드 광케이블을 사용하고 비교적 짧은 거리를 보낼 수 있는 이더넷 표준
* 1000BASE-LX/10GBASE-LR
    * 싱글모드 광케이블을 사용하고 비교적 긴 거리를 보낼 수 있는 이더넷 표준

#### 케이블, 커넥터 구조

케이블은 물리적으로 본체, 커넥터, 트랜시버와 같은 여러 요소로 나뉜다.
케이블 본체는 트위스티드페어, 동축, 광 케이블로 나뉘고 케이블 본체의 종류에 따라 커넥터와 트랜시버의 종류도 함께 달라진다.

트랜시버, 커넥터, 케이블 본체 3개 부분이 모두 분리되어 있거나 하나로 합쳐진 케이블 형태도 있다.
트위스티드 페어 케이블의 경우 커넥터와 케이블 본체가 하나로 구성되어 있고 별도의 트랜시버가 없는 경우가 많다.
광케이블은 다양한 속도와 거리를 지원해야 하므로 트랜시버, 커넥터와 케이블을 분리하는 경우가 많다.

##### 케이블 - 트위스티드 페어 케이블

가장 흔히 사용하는 케이블이다.
두가지 종류가 있는데, 쉴드를 장착한 STP/FTP 케이블과 쉴드가 없는 UTP케이블이 있다고 한다.

* STP(Shielded Twisted Pair)
    * 그물 형태의 쉴드가 있다.
* FTP(Foiled Twisted Pair)
    * 포일 형태의 쉴드가 있다.
* UTP(Unshielded Twisted Pair)
    * 쉴드가 없다.

여기서는 케이블 등급을 `카테고리` 단위로 나눈다.

* 카테고리 5E 케이블
    * 가장 대중족인 케이블
    * 1G속도를 지원하다.
    * 일반 단말을 연결하는 데에 적합하고 데이터 센터와 같이 높은 대역폭을 지원해야 할 때에는 사용하기 어렵다.

##### 케이블 - 동축 케이블

케이블 TV와 연결할 때 사용하는 두꺼운 검정 케이블 같은 종류..
주로 케이블TV나 인터넷 연결을 위해서만 사용되어 왔다.

하지만 최근 10G이상의 고속 연결을 위해 트랜시버를 통합한  DAC(Direct Attach Copper Cable)을 많이 사용하는데 이 케이블이 동축 케이블 중 하나이다.

##### 케이블 - 광케이블

일반적으로 다른 구리선(UTP, 동축)보다 신뢰도가 높고 더 먼 거리까지 통신할 수 있어 높은 대역폭을 요구하거나 먼 거리를 통신해야 하는 네트워크 장비 간의 통신에 주로 사용된다.

케이블은 저항 때문에 생기는 감쇄와 주위 자기장의 감섭으로부터 보호받아야 하는데, 광케이블은 광신호를 기반으로 하여 이런 간섭으로부터 자유롭다.

광케이블은 싱글모드, 멀티모드 2가지로 나뉜다.

* 싱글모드
    * 먼 거리 통신을 지원하기 위해 케이블 굵기가 매우 가늘고 신호를 보내는 광원으로 레이저를 사용
        * 레이저는 다른 빛에 비해 먼 거리를 퍼지지 않고 직진하는 성질이 있다.
    * 전송 손실이 적고 멀리 전송이 가능하고 케이블 취급이 어렵다. 고가이다.
    * 노란색
* 멀티모드
    * 싱글모드에 비해 비교적 굵은 케이블을 사용하며 광원으로 LED사용
    * 레이저보다 LED가 더 쉽게 구현 가능해서 싱글모드보다 저렴하다.
    * 전송 손실이 비교적 많고 짧은 거리의 전송이 가능하며 케이블 취급이 쉽다. 저가이다.
    * 주황색(1G), 하늘색(10G)

##### 커넥터

> 케이블의 끝부분

네트워크 장비나 네트워크 카드에 연결되는 부분이다.
트위스티드 페어 케이블에서는 RJ-45커넥터를 사용하지만 광케이블은 다양한 커넥터가 있다.

광케이블은 주로 LC커넥터가 사용되고 SC커넥터가 일부 사용된다.

##### 트랜시버

> 다양한 외부 신호를 컴퓨터 내부의 전기 신호로 바꾸어 준다.
> 케이블이 변경되면 네트워크 장비와 네트워크 카드도 함께 변경해야 하는 문제 해결이나 서로 다른 다양한 네트워크 표준을 혼용해 사용할 수 있도록 사용한다.

과거에는 이더넷 표준과 케이블을 만족하기 위해 네트워크 장비나 NIC를 별도로 구매해야 했다.
일반적으로 트랜시버 전체를 GBIC(지빅 : GigaBit Interface Converter)이라고 부른다.
이후로 SPF(Small Form-Factor Pluggable)나 SPF+같은 상위 표준이 나오긴 함..

트랜시버는 광케이블뿐 아니라 트위스티드 페어 케이블도 수용할 수 있으며 이런 트랜시버를 GLC-TE라고 한다.

트랜시버를 사용하면 통신 길이와 속도를 조절할 수 있어 최근 생산되는 대부분의 네트워크 장비와 네트워크 인터페이스 카드는 트랜시버를 지원한다.

일반적으로 데이터 센터 고속 네트워크에서는 `스위치 - 트랜시버 - 광케이블 - 트랜시버 - NIC카드` 이런 식으로 스위치와 서버를 연결함.

#### 허브

케이블과 동일하게 1계층에서 동작하는 장비.
거리가 멀어질수록 줄어드는 전기 신호를 재생성해주고 여러 대의 장비를 연결한 목적으로 사용됨.

들어온 신호를 모든 포트로 내보내 네트워크에 접속된 모든 단말이 경쟁하게 되므로 전체 네트워크 성능이 줄어드는 문제가 있고 패킷이 무한 순환해 네트워크 전체를 마비시키는 루프와 같은 다양한 장애의 원인이 되어 거의 사용되지 않는다.

#### 스위치

여러 장비를 연결하고 통신을 중재하는 장비.
허브와 동일한 역할을 하는 2계층 장비이다.

내부 동작 방식은 다르지만 여러 장비를 연결하고 케이블을 한곳으로 모아주는 역할은 같으므로 `허브`라는 용어를 공통적으로 사용한다.

스위치는 `통신중재`, `허브역할` 두개다 포함해서 스위칭 허브라고도 불린다.

스위치는 MAC주소를 이해할 수 있어 목적지 MAC주소의 위치를 파악하고 목적지가 연결된 포트로만 전기 신호를 보낸다.

만약

* 출발지 : 서버 A
* 목적지 : 서버 B

라고 하면 
허브는 A에서 받은 신호를 B, C, D모두에 보내버리고
스위치는 A에서 받은 신호를 B에만 보내서 C, D는 알아서 다른 통신이 가능하다.

또한 허브는 무전기처럼 한쪽 방향으로만 통신(송/수신 동시 불가능)하지만
스위치는 전화기처럼 양쪽 방향으로 통신 가능하다.

이 스위치의 발명 덕분에 이더넷 네트워크가 효율이 높아짐.

#### 라우터

먼 위치에 있는 네트워크와의 통신을 위해 라우터가 필요해졌다.
3계층에서 동작하면서 먼 거리로 통신할 수 있는 프로토콜로 변환한다.

원격지로 쓸데없는 패킷이 전송되지 않도록 브로드캐스트와 멀티캐스트를 컨트롤하고 불분명한 주소로 통신을 시도하는 경우 이를 버린다.
정확한 방향으로 패킷이 전송되도록 경로를 지정하고 최적의 경로로 패킷을 포워딩한다.

#### 로드 밸런서

4계층에서 동작한다.
ADC(Applicatino Delivery Controller)라고도 부름

L4스위치라고 부르는 네트워크 장비도 로드 밸런서의 한 종류로 스위치처럼 여러 포트를 가지고 있으면서 로드 밸런서 역할을 하는 장비를 지칭한다.

4계층 포트 주소를 확인하는 동시에 IP주소를 변경할 수 있다.
로드 밸런서가 갖아 많이 사용되는 서비스는 웹이다.

대표 IP를 LB가 갖고 얘가 각 웹 서버로 패킷의 목적지 IP주소로 변경해 보내준다.
이렇게 하면 여러 웹 서비스가 동시에 동작해 서비스 성능을 높여주는 동시에 일부 웹 서버에 문제가 발생하더라고 빠른 시간 안에 서비스가 복구되도록 돕는다.

로드 밸런서는 IP변환 외에도 서비스 헬스 체크 기능이나 대용량 세션 처리 기능이 있다.

#### 보안 장비(방화벽/IPS)

네트워크 장비는 대부분 정보 전달에 초점이 맞추어져 있지만 보안 장비는 정보를 잘 제어하고 공격을 방어하는 데에 초점이 맞추어져 있다.

가장 유명한 보안 장비는 방화벽이다.
방화벽은 4계층에서 동작해 방화벽을 통과하는 패킷의 3, 4계층 정보를 확인하고 패킷을 정책과 비교해 버리거나 포워딩한다.

