# 스프링 배치 공부 1
###### tags: `Tag(스프링배치)`

## 배치 작업이란?

Real-time(실시간) 작업의 반대 개념이다.

즉 배치 작업은, 데이터들을 미리 보관해 두고, 주1회/월1회 이렇게 특정 기간마다 모아서 뭉탱이로 처리하는 것이다.

이 배치 작업은 고객의 눈에 보이지는 않지만, 서비스 뒷편에서 대량의 작업을 처리하고 있고 다음과 같을 때에 주로 사용된다.

* 이메일 쿠폰 발송
* 가맹점 정산
* 거래 명세서 생성
* 추천 시스템 데이터작업

왜 이럴 때 쓰일까??
만약 엄청나게 많은 데이터가 계속해서 들어오는 경우, 이를 실시간으로 처리하게 되면 대량의 작업으로 인해 다른 작업에도 무리가 가게 된다.
그렇기 때문에 위의 내용처럼 대용량 작업 + 실시간 작업의 필요성이 없는 작업들은 배치로 적용한다.
이는 사실상 거의 필수로 진행해야 할 것이다.

## 스프링 배치로 작업이 필요한 이유는

배치 작업은 스프링 배치를 사용하지 않고도 만들 수 있다.
다만 이를 스프링 배치를 사용한다면 데이터를 읽고, 쓰고, 배치 작업에 필요한 여러 기능이 기본이 제공이 된다.
그렇기 때문에 개발자는 비즈니스 로직에만 집중 할 수 있고, 일관성된 코드 적용이 가능하다.

이는 배치 작업은 데이터를 읽고, 쓰는 write작업 등의 순서가 정형화가 되어 있기 때문이다.
즉 정형화 된 코드를 배치로 작업하기 때문에 일관성된 코드 적용이 가능하고, 유지 보수 및 확장성에도 큰 도움을 주게 된다.

추가로 DB와의 통신에서 매우매우 중요한 Transaction 등에 대해서도 스프링 배치에서는 쉽게 사용할 수 있도록 도와준다고 한다.

기존 서비스가 Spring framework로 되어 있다면 여기에 바로 호환이 가능하다!!

즉 정리하면

* 풍부한 기능 제공으로, 비즈니스 로직에 전념 가능
* 일관성된 코드를 작성할 수 있어 유지 보수 및 확장성에 도움이 된다.
* 트랜잭션의 활용을 도와준다.
* 기존 스프링 서버에 호환이 가능하다.


## 간략한 구조와 설계

![](https://i.imgur.com/wPWyaGA.png)

JobRepository 안에 JobLauncher, Job, Step이 위치한다.
그리고 다시 Step의 아래에는 ItemReader, ItemProcessor, ItemWriter가 있다.

* JobRepository
배치가 수행될 때, 수행되는 메타 데이터를 관리하고 시작시간, 종료시간, Job의 상태 등 배치 수행 관련 데이터들이 저장된다.
* JobLauncher
Job을 시작시켜주는 역할을 수행한다.

나머지 주 개발은 Job과 Step, 그리고 하위의 아이템 영역에서 진행하게 된다.
* Job
은 하나의 배치 작업이다.
* Step
Job의 세부 작업 내용이다. 이 Step은 하나의 Job 내에 여러개가 존재할 수 있다.
    

