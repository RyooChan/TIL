## IT인프라, 왜 알아야 할까??

어플리케이션을 동작시키기 위해서는 다양한 요소들에 대한 고민이 필요하다.

이 때 우리는 시스템을 크게 기능적 요구사항과 비기능적 요구사항으로 나누어 생각해볼 수 있는데, IT인프라 환경은 비기능적 요구사항에서 중요한 역할을 차지한다.

![](https://i.imgur.com/hVir5vB.png)

어플리케이션 개발에 있어서는 크게 기능적 요구사항  / 비기능적 요구사항 에의 고민이 필요하다.

* 기능적 요구사항
    * 시스템이 무엇을 해야 하는지에 대한 정의
        * 시스템이 수행해야 하는 기능
        * 기술 세부정보
        * 데이터 조작 및 처리
        * 등등...
* 비기능적 요구사항
    * 대체적으로 품질이나 속성에 대한 내용
    * 인프라는 **비기능적 요구사항과 밀접한 관련**을 가지고 있다.
        * 제품 요구사항 
            * 시스템이 얼마나 빨리 실행되고, 얼마나 많은 CPU나 메모리가 존재해야 하는지?
            * 장애가 났을 때를 대비하여 고가용성(HA)를 어떻게 얻어놓아야 하는지?
        * 조직 요구사항
            * 사용될 프로그래밍 언어는 어떤 것을 사용할 것인지?
            * 설계 방법 등등..
        * 외부 요구사항
            * 법률적 / 윤리적 요구사항 포함


### IT인프라란 무엇일까??

IT Infrastructrure란, IT서비스의 기반이 되는 Information Technology(IT) 구성 요소들의 집합으로 IT구성 요소에는 서버, 스위치, 스토리지 같은 하드웨어 장비 뿐만 아니라 운영체제(OS)같은 소프트웨어 및 네트워크도 포함된다.

![](https://i.imgur.com/PlKumrW.png)

#### 하드웨어

서버, 스위치, 라우터 등이 포함된다.
해당 장비들을 설치하고 운영하기 위한 Data Center도 하드웨어에 포함된다.

#### 소프트웨어

서버 설치 이후, 서버에 올라가는 요소들(Windows / Linux) 가 포함된다.
OS위에 올라가는 아파치 등의 웹서비스, 미들웨어 등도 소프트웨어에  포함된다.


#### 네트워크

케이블(LAN선 연결), 스위치(서버와 케이블로 연결된 L2스위치), 라우터 역할을 해주는 L3스위치 등등.. 다양한 네트워크 장비들이 포함된다.


### 다양한 IT인프라 유형 (On-Premise / Public)

여기서는 크게 On-Premise , Public Cloud 로 분류된다.

![](https://i.imgur.com/PcsmRlS.png)

#### On-Premise

기업이 자체 데이터센터를 보유하고, 그 안에 서버와 네트워크 등의 장비 등을 구축하고 자체적으로 운영하는 방식이다.
클라우드 시작이 활발해지기 이전까지 가장 많이 쓰이던 방식이다.
Private Cloud가 이 On-Premise환경에 속한다.
기업 입장에서 데이터센터의 관리부터 물리시스템 구축 및 운영까지 관리 coverage가 넓다.


#### Public Cloud

기업 입장에서 Public Cloud를 사용하면 물리적 구축의 경우는 Cloud Service Provider(CSP)에서 진행해주기 때문에 더이상 데이터센터를 구축하거나 운영할 필요가 없고, 여기서 받아온 것을 쓰기만 하면 된다.


### 다양한 IT인프라 유형 (Cloud Computing)

클라우드는 크게 Private Cloud와 Public Cloud로 나눌 수 있다.

두 분류로 나누는 기준은 인프라가 존재하는 위치 와 운영 방식 , 그리고 사용할 수 있는 사용자  이다.

![](https://i.imgur.com/jVrc7Rd.png)


#### Private Cloud

일반적으로 On-Premise방식으로 구축/운영된다.
그렇기 때문에 인프라 위치가 자체 데이터센터에 위치한다.
또한 특정 그룹만이 접근 가능하다.


사내 직원들만 이용할 수 있는 서비스에 주로 사용한다.
이는 기업이 원하는대로 구축이나 운영이 가능하다는 장점을 가진다.


#### Public Cloud

불특정 다수를 대상으로 누구나 사용할 수 있게 해준다.
CSP에 위치와 운영을 일임한다.
그렇기 때문에 인프라 사용의 부담이 없어지고 고객을 위한 다양한 추가가 가능하다. (PaaS, Saas 등등..)
또한 트래픽에의 대응이 빠르게 이루어진다.


---


### 인프라의 근간을 이루는 환경과 하드웨어

사용자에게 IT서비스를 제공하기 위해서는 서버, 스토리지, 스위치 같은 물리 장비들을 구축하고 운영해야 한다.
또한 이런 장비들을 배치하고 동작시킬 수 있는 데이터센터가 존재해야 한다.


#### 데이터센터

서버나 스토리지등의 장비들을 보관하는 시설이다.
이 서버나 스토리지 등은 Rack이라는 곳에 Mount되어 운영된다.


### 서버의 구성요소

서버는 네트워크를 통해 클라이언트에게 정보를 제공하는 컴퓨터 시스템이다.
서버에는 수많은 구성요소들이 존재하지만, 대부분 고객 입장에서 고려하는 중요 요소로는
CPU , Memory , Disk , Network Interface Card(NIC) 이다.

![](https://i.imgur.com/xV7R4qM.png)


#### Disk

Disk는 서버의 데이터 저장공간 역할을 해주는 부품이다.
일반적으로 On-Premise 에서는 OS용도의 Disk와 실제 데이터 저장을 위한 공간용 Disk를 따로 구분해서 장착하고 운영하게 된다.
m.2 같은 서버 안에 장착되는 형태의 녀석도 있다.


#### Panel

System Insight Dispaly  / LCD Panel ← 회사마다 부르는 명칭이 다르다.
서버 안의 부품들의 상태를 확인할 수 있도록 도와주는 디스플레이이다.



#### UID Button

서버 작업을 들어가기 전에 엔지니어들이 꼭 누르는 버튼이기도 하다.
이 버튼을 누르면 작업할 부분이 초록색으로 빛나게 된다.



#### Network Interface Controller(LAN카드)

NIC부분에서 

![](https://i.imgur.com/8BiN9YT.png)


이 네모난 구멍 하나하나가 실제 케이블로 연결되는 부분이다.


#### IPMI (iLO, IDRAC)

iLo . IDRAC <- 회사마다 부르는 명칭이 다름.

서버를 윈격으로 관리할 수 있게끔 도와주는 인터페이스이다.

이 서버를 원격으로 관리한다는 이야기의 뜻은 만약 데이터센터에 서버를 설치하고 운영 도중 갑자기 서버의 서비스 네트워크가 안된다거나 갑작스레 다운되는 경우 재설정이나 재시작을 원격에서 가능하도록 해주는 것이다.

또한 로그를 전달시켜 주기도 한다.

#### Power Supply

서버에 전력을 공급해 준다.

#### Fan

서버의 열감을 낮춰줄 수 있도록 cooling 역할을 해준다.

#### CPU와 Memory

서버에서 이 두개는 서버 성능과 직결되는 아주 중요한 구성요소이다.

무작정 설치할 수 있는게 아니라, 서버 사양에 따라 설치할 수 있는 개수가 달라진다.

또한 서버 모델에 따라 설치 가능 부품이 달라지기 때문에, 사전에 이에 관한 검사를 해 주어야 한다.

#### CPU

일반적으로 CPU사양을 고려할 때에는 클럭 속도와 core개수를 본다.

클럭 개수는 CPU가 초당 실행하는 사이클 수를 GHz단위로 측정하며, core는 개수가 많을수록 멀티태스킹을 할 수 있기 때문에 성능적으로 유리하다.

* 클럭 속도
    * CPU가 초당 시행하는 싸이클 수를 GHz단위로 측정한 것을 뜻한다.
    * 즉 클럭 속도가 빠를수록 CPU의 연산 속도가 빠르다.
* core
    * CPU의 뇌라고 생각하면 편하다.
    * 실제 모든 계산 및 연산을 core에서 진행한다.
    * 즉 core수가 많을 수록 성능적으로 유리해질 것이다.


#### Memory

메모리는 CPU에서 처리해야 하거나, 처리한 데이터를 보관하는 공간이기에 대용량일수록 좋다.

다만 메모리는 원하는 대로 꽂을 수 있는 것은 아니다.

기존에 할당되어 있는 메모리 슬롯 이상으로 꽂을 수 없을 뿐 아니라, 꽂을 때에도 순서에 유의해야 한다.

![](https://i.imgur.com/eGWeZwe.png)


여기서 p1, p2는 CPU인데, 이 CPU가 만약 하나만 꽂혀 있다면 그 양 옆의 메모리 슬롯에만 메모리를 꽂아주어야 한다.

소켓을 두 개 사용한다면 메모리 개수를 균등하게 분배하여 꽂아야 한다.

그리고 여기서도 순서에 맞추어 장착해야한다.

예를 들어,

p1, p2를 모두 사용하고 8개의 메모리를 꽂는다고 하면

CD - AB를 양쪽에 균등히 넣어주게 되는 것이다.


#### 디스크와 RAID

#### 디스크

디스크는 HDD와 SSD가 있다.

* HDD
    * 자기디스크 기반으로 만들어졌다.
    * 가격이 싸다.
* SSD
    * 플래시 메모리 기반으로 만들어졌다.


#### RAID

만약에 서비스 실행 도중에 다운될 경우 어떻게 할까?

RAID란 저장 장치 여러개를 묶어 사용하는 기술로, 가용성과 고성능을 위해 사용된다.

다양한 동작 방식이 존재하며(RAID 0~6, 10, JBOD 등등...) 상황에 맞게 선택하여 사용하게 된다.


고가용성을 위해서는 하기의 두 가지 방법을 사용하게 된다.

* 패리티
    * 오류 검출 기능 사용
* 디스크 미러링
    * 데이터 분산 저장


#### Network 이중화

네트워크 통신이 되지 않는다면 궁극적으로 사용자에게 서비스를 제공할 수 없게 된다.

이를 방지하기 위해 네트워크도 이중화 혹은 다중화 구성이 가능하다.

![](https://i.imgur.com/sWsHLxT.png)

이 작업을 전문용어로 Teaming  혹은 Bonding 이라고 부른다.


#### 원격 서버 관리 - IPMI

IPMI는 원격으로 서버를 관리할 수 있게 도와준다고 했는데, 그래서 실제로 이 IPMI를 사용할 때에는 전용 스위치에 케이블을 딴 후, 관리 페이지를 사용할 수 있다.

이것도 제조사 / 벤더마다 구성이 다르니까 그때마다 사용하면 된다.


#### 베어메탈 서버

On-Premise상에서 사용하는 것처럼, 하나의 Cloud에서 물리 서버를 통째로 사용하는 방식이다.

![](https://i.imgur.com/rmOWvrr.png)

물리 장비 위에 OS설치 후 여러 application들이 동작하는 방식이다.

VM을 사용하는 경우, 여러 VM들이 여러 하드웨어 리소스를 점유하기 때문에 성능이 제한될 수 있는데, 베어메탈의 경우는 하나를 통으로 쓰기 때문에 이런 문제에서 자유로울 수 있다.


#### 가상 서버

일반적으로 클라우드에서 만드는 대부분의 서버는 가상 서버로 제공된다.

위의 베어메탈과는 조금 다르게 구성되어 있다.

![](https://i.imgur.com/2sqkhdu.png)
![](https://i.imgur.com/hbfHsG8.png)

물리장비 위에 Hypervisor이라는 것이 올라가 있는데, 이것 덕분에 하나의 물리 장비 위에 여러 OS가 올라갈 수 있게 된다.

이것이 가상화를 가능하게 해주는 플랫폼이다.

> Passthrough

> 그래픽카드 리소스를 특정 VM에서만 독점적으로 사용하는 방식이다.


























