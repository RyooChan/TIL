# Go의 에러처리

> 에러 처리는 프로그래밍에서 중요하고, Go는 다양하게 에러를 처리하는 방안을 제시한다.

error는 내장 인터페이스의 에러 타입을 가진다.
그래서 이를 통해 에러뿐 아니라 어떤 맥락을 함께 제공하는것도 가능하다.

* 가능하면 에러 문자열은 에러가 발생된 명령/패키지를 접두어로 써서 에러의 근원지를 파악할 수 있어야한다.
* 상세 에러내용에 관심이 있다면 자세한, 추가적인 정보를 얻기 위해 타입 스위칭이나 타입 단언을 사용할 수 있다.
    * err인터페이스를 특정 타입으로 변환해서 사용
        * 에러가 특정 타입으로 변환된 다음, 그 에러에 대해 더 많은 정보를 확인할 수 있다.
            * 이렇게 되면 실제로 에러를 처리하는 부분에서 변환된 에러타입(타입 정해짐)으로 받아지니까 그걸로 에러에 관한 정보 확인?
            
## 패닉

에러때문에 완전 맛이 가버리면 프로그램이 더이상 진행이 안된다.
Go에서는 `panic`을 통해 런타임 에러를 일으켜 프로그램을 중단시킨다.

panic은 프로그램 종료될 때에 출력할 타입 하나를 인자로 받는다. -> 주로 String
그리고 불가능한 일이 벌어졌음을 알리는 방법이기도 하다(무한루프 등)

근데 보통 라이브러리 함수는 panic을 피해야한다.
왜냐면 그냥 진행하는게 전체 프로그램 종료보다는 나아서이다.

근데 초기화 작업중에 초기 세팅이 불가능하면 panic을 발생시키고 알려야한다.

## 복구

런타임 에러를 포함한 패닉이 발생하였을 때 현재 함수의 실행을 중단시키며 defer함수를 발생시키면서 고루틴 스택을 풀기 시작한다.
그리고 고루틴 스택 최정상까지 다 풀면 프로그램이 종료된다.

recover를 사용하면 풀기 작업이 중지되고, panic에 전달된 인자값이 리턴된다.
그리고 recover은 defer함수 내에서만 유용하다.
recover를 사용하면 고루틴의 통제권을 다시 얻을 수 있으며 명렁어 실행을 정상적으로 진행할 수 있게 된다.

이를 통해서 실패한 고루틴만을 종료시키고 나머지는 죽이지 않는 등의 응용이 가능함.

